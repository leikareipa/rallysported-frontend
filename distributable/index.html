<!DOCTYPE html>
<html>
    <head>
		<meta name="viewport" content="width=device-width">
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="index.css">
        <link rel="stylesheet"
              href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"
              integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP"
              crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Fredoka+One" rel="stylesheet">
        <title>RallySportED-js (web-beta.8~dev)</title>
    </head>
    <body>
        <div id="html-ui" v-if="uiVisible" v-cloak>
            <span id="track-name-display">&ldquo;{{trackName.length? trackName : ""}}&rdquo;</span>

            <div id="button-bar">

                <div class="button left"
                     title="Download this track"
                     onclick="Rsed.core.current_project().download_as_zip();">
                    Download
                </div>

                <a class="button middle"
                   title="View RallySportED's user guide"
                   href="./user-guide/" target="_blank" rel="noopener">
                    Help
                </a>

                <a id="rsc-button"
                   class="button right"
                   title="Browse tracks made by others"
                   href="/rallysport-content/tracks/" target="_blank" rel="noopener">
                    Tracks
                </a>

                <div id="stream-button"
                     style="display: none;"
                     class="button right stream"
                     :class="streamStatus"
                     title="Stream"
                     :onclick="(streamStatus == 'disabled')
                               ? 'Rsed.stream.start();'
                               : 'Rsed.stream.stop();'"></a>
                    <i class="fas fa-fw"
                       :class="(streamStatus == 'enabled')
                               ? 'fa-eye'
                               : (streamStatus == 'initializing')
                                 ? 'fa-spin fa-spinner'
                                 : 'fa-eye-slash'"></i>
                    {{streamStatus == "enabled"? "Streaming" : "Stream"}}
                    {{streamStatus == "enabled"? ` (${streamViewerCount})` : ""}}
                </div>

            </div>
            
            <div id="prop-dropdown" class="dropdown-menu">
                <div class="item"
                     v-for="prop in propList"
                     v-on:click="activate_prop(prop.propName)">{{prop.propName}}</div>
            </div>
        </div>

        <div id="render_container" class="canvas_container"
             ondrop="window.drop_handler(event);" ondragover="event.preventDefault();">
             <canvas id="render-canvas" class="canvas"></canvas>
        </div>

        <div id="popup-notification-container"></div>

        <script>
            const args = new URLSearchParams(window.location.search);

            if (args.has("debug"))
            {
                document.getElementById("stream-button").style.display = "initial";
                document.getElementById("rsc-button").classList.remove("right");
                document.getElementById("rsc-button").classList.add("middle");
            }
        </script>
        <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.min.js"></script>
        <script src="./client/js/rallysported.cat.js" defer></script>
    </body>
</html>
